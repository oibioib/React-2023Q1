@use '@scss/abstracts' as theme;

@mixin loading-bg() {
  background: linear-gradient(
      115deg,
      rgba(255, 255, 255, 0) 40%,
      rgba(255, 255, 255, 0.2) 50%,
      rgba(255, 255, 255, 0) 60%
    )
    lighten(theme.$color-grey, 10%);
  background-size: 200% 100%;
  background-position-x: 180%;
  animation: 1.5s loading ease-in-out infinite;
}

.main-card-modal {
  display: grid;
  grid-template-columns: auto auto 1fr;
  grid-template-areas:
    'avatar author date'
    'description description description'
    'image image image';
  max-width: 100%;
  border-radius: theme.$main-radius;
  gap: calc(theme.$main-gap / 2);
  align-items: center;
  overflow: hidden;
  transition: 1s;

  @media screen and (max-width: theme.$md) {
    grid-template-columns: 1fr;
    grid-template-areas:
      'avatar'
      'author'
      'date'
      'description'
      'image';
    font-size: 1.4rem;
  }

  &__loader {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: calc(100vh / 2);
  }

  &__avatar {
    border-radius: 50%;
    grid-area: avatar;

    &_loading {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      @include loading-bg;
    }
  }

  &__author {
    grid-area: author;
    font-weight: 600;
    font-size: 1.8rem;

    &_loading {
      grid-area: author;
      border-radius: 3px;
      height: 25px;
      width: 90px;
      @include loading-bg;
    }

    @media screen and (max-width: theme.$md) {
      font-size: 1.6rem;
    }
  }

  &__date {
    grid-area: date;

    &_loading {
      grid-area: date;
      border-radius: 3px;
      height: 25px;
      width: 70px;
      @include loading-bg;
    }
  }

  &__description {
    grid-area: description;

    &_loading {
      grid-area: description;
      border-radius: 3px;
      height: 25px;
      width: 100%;
      @include loading-bg;
    }
  }

  &__image {
    max-width: 100%;
    border-radius: theme.$main-radius;
    grid-area: image;

    &_loading {
      grid-area: image;
      border-radius: theme.$main-radius;
      height: 40vh;
      width: 100%;
      @include loading-bg;
    }
  }
}

@keyframes loading {
  to {
    background-position-x: -20%;
  }
}
